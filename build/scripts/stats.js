import*as Constants from"./constants.js";import*as Storage from"./util/storage.js";import*as Settings from"./settings.js";import{displayGraph}from"./util/graph.js";export const timerBlock=document.getElementsByClassName("center-container")[0];export const counterBlock=document.getElementsByClassName("counters-container")[0];export const statsPane=document.getElementById("stats-container");export const statsOpenButton=document.getElementById("stats-open-button");export const statsCloseButton=document.getElementById("stats-close-button");const totalPomoElem=document.getElementById("total-pomodoros"),totalInterruptElem=document.getElementById("total-interruptions"),bestPomoElem=document.getElementById("total-best-pomo"),bestTimeElem=document.getElementById("total-best-time"),totalTasksElem=document.getElementById("total-tasks"),todayPomoElem=document.getElementById("today-pomodoros"),todayTasksElem=document.getElementById("today-tasks"),todayInterruptElem=document.getElementById("today-interruptions"),MINUTES=60,NUM_DECIMALS=2;export let statsPaneIsOpen=!1;statsOpenButton.onclick=openStatsPane,statsCloseButton.onclick=closeStatsPane;export function updateStats(){Storage.updateStorage(),displayTodayStats(),displayTotalStats(),displayGraph(Storage.getWeekHistory())}export function openStatsPane(){updateStats(),Settings.removeAll(),Settings.settingsPane.classList.contains(Constants.SLIDE_OPEN_SETTINGS)?(Settings.closeSettingsPane(),timerBlock.classList.add(Constants.SLIDE_ACROSS_LEFT)):timerBlock.classList.add(Constants.SLIDE_OPEN),statsPane.classList.add(Constants.SLIDE_OPEN),statsPaneIsOpen=!0,toggleButtons()}export function closeStatsPane(){timerBlock.classList.remove(Constants.SLIDE_OPEN),statsPane.classList.remove(Constants.SLIDE_OPEN),timerBlock.classList.remove(Constants.SLIDE_ACROSS_LEFT),timerBlock.classList.add(Constants.SLIDE_CLOSE),statsPane.classList.add(Constants.SLIDE_CLOSE),statsPaneIsOpen=!1,toggleButtons()}export function toggleButtons(){statsOpenButton.disabled=statsPaneIsOpen,statsCloseButton.disabled=!statsPaneIsOpen}export function displayTotalStats(){const t=Storage.getCounter(Storage.TOTAL_POMO_ID),e=Storage.getCounter(Storage.TOTAL_INTERRUPTION),o=Storage.getCounter(Storage.BEST_DAILY_POMO_ID),s=Storage.getCounter(Storage.TOTAL_TASK_ID);totalPomoElem.textContent=t,totalInterruptElem.textContent=(e/(t||1)).toFixed(2),bestPomoElem.textContent=o,bestTimeElem.textContent=(o*(Constants.WORK_LENGTH/60)).toFixed(2),totalTasksElem.textContent=s}export function displayTodayStats(){const t=Storage.getCounter(Storage.TODAY_POMO_ID),e=Storage.getCounter(Storage.TODAY_INTERRUPTION),o=Storage.getCounter(Storage.TODAY_TASK_ID);todayPomoElem.textContent=t,todayInterruptElem.textContent=e,todayTasksElem.textContent=o}